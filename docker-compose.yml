services:
  opencloud:
    image: opencloudeu/opencloud:latest
    container_name: opencloud
    restart: unless-stopped
    environment:
      - OC_URL=https://dxp2800-0aef.tail10d5bf.ts.net
      - OC_INSECURE=true
      - PROXY_TLS=false
      - PROXY_HTTP_ADDR=0.0.0.0:9200
      - OC_CONFIG_DIR=/app/config
      - OC_DATA_DIR=/app/data
      - LOG_LEVEL=info
      - LOG_PRETTY=true
    ports:
      - "9200:9200"
    volumes:
      - ./config:/app/config
      - ./data:/app/data
      - /volume1/MyFiles:/volume1/MyFiles
    extra_hosts:
      - "dxp2800-0aef.tail10d5bf.ts.net:127.0.0.1"
    entrypoint: /bin/sh
    command: -c "opencloud init || true; opencloud server"
    user: "1000:1000"
    networks:
      - opencloud_opencloud-net

networks:
  opencloud-net:
    external: true
    name: opencloud_opencloud-net

volumes:
  opencloud-config:
  opencloud-data:   
